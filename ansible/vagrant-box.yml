# An Ansible playbook that configures a Vagrant box
---
- name: 'AlmaLinux Vagrant Box'
  hosts: default
  become: true
  collections:
    - almalinux.ci

  roles:
    - upgrade_and_reboot
    - role: ezamriy.vbox_guest
      when: packer_provider == 'virtualbox-iso'
    - role: vmware_guest
      when: packer_provider == 'vmware-iso'
    - role: qemu_guest
      when: packer_provider == 'qemu'
    - install_vagrant_key
    - nfs-client
    - cleanup_vm
